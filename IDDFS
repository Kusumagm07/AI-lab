def DLS_full(graph, start, goal, limit, visited, visit_order):
    """
    Depth-Limited Search (DLS) that explores all nodes up to limit,
    recording the order in which nodes are visited at this limit.
    """
    if limit < 0:
        return

    visited.add(start)
    visit_order.append(start)

    for neighbor in graph.get(start, []):
        if neighbor not in visited:
            DLS_full(graph, neighbor, goal, limit - 1, visited, visit_order)

def IDDFS_full(graph, start, goal, max_depth=50):
    """
    Iterative Deepening DFS printing nodes visited only at current depth limit.
    """
    for depth in range(max_depth + 1):
        visited = set()
        visit_order = []
        DLS_full(graph, start, goal, depth, visited, visit_order)
        print(f"Depth Limit {depth}: {' -> '.join(visit_order)}")
        if goal in visit_order:
            print(f"Goal '{goal}' found at depth {depth}")
            break

# Example usage:
if __name__ == "__main__":
    graph = {
        'A': ['B', 'C'],
        'B': ['D', 'E'],
        'C': ['F', 'G'],
        'D': ['H'],
        'E': ['F'],
    }

    start_node = 'A'
    goal_node = 'G'

    IDDFS_full(graph, start_node, goal_node, max_depth=3)
